<app-menu
  *ngIf="isMenuOpened"
  (closeMenu)="closeMenu()"
  [interviewees]="interviewees$ | async"
></app-menu>

<div class="wrapper">
  <app-navbar
    (openMenu)="openMenu()"
    [showOpenBtn]="isHandset$ | async"
  ></app-navbar>

  <mat-drawer-container class="interview">
    <mat-drawer
      #drawerRef
      class="interview-sidenav"
      [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
      [mode]="(isHandset$ | async) ? 'over' : 'side'"
      [opened]="(isHandset$ | async) === false"
    >
      <mat-toolbar>
        <mat-toolbar-row>
          LA REVOLUCI&Oacute;N <br />
          DE LOS APLAUSOS
        </mat-toolbar-row>
        <mat-toolbar-row>
          <button mat-icon-button (click)="expansionPanelRef.toggle()">
            <mat-icon
              class="expand-icon"
              [ngClass]="{ 'arrow-up': expansionPanelRef.expanded }"
              aria-hidden="false"
              aria-label="toggle sidenav menu"
              svgIcon="arrowDown"
            ></mat-icon>
          </button>
        </mat-toolbar-row>
      </mat-toolbar>

      <mat-expansion-panel #expansionPanelRef hideToggle expanded>
        <ng-template matExpansionPanelContent>
          <mat-nav-list>
            <a
              mat-list-item
              *ngFor="let interviewed of interviewees$ | async"
              [routerLink]="['/interview', interviewed.id]"
              routerLinkActive="active-interviewed"
              (click)="setIntervieweeById(interviewed.id)"
            >
              {{ interviewed.name | uppercase }}
            </a>
          </mat-nav-list>
        </ng-template>
      </mat-expansion-panel>
    </mat-drawer>

    <div class="interview-content">
      <app-interviewed-detail></app-interviewed-detail>
      <router-outlet></router-outlet>
      <app-card-slider></app-card-slider>
    </div>
  </mat-drawer-container>

  <app-footer [isDetailView]="true"></app-footer>
</div>
